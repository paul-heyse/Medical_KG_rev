FROM python:3.12-slim

WORKDIR /app

# Install only CPU dependencies
RUN pip install --no-cache-dir \
    mineru[cpu] \
    httpx \
    tenacity \
    pydantic \
    prometheus-client

# Copy application code
COPY src/ /app/src/
COPY config/ /app/config/

ENV PYTHONPATH=/app

CMD ["python", "-m", "Medical_KG_rev.services.mineru.worker"]
